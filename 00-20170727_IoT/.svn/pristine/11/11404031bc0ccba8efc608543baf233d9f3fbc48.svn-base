<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"   
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">  
<mapper namespace="edu.hnu.csee.luo.dao.UserLoginDao"> 

<resultMap id="BaseResultMap" type="edu.hnu.csee.luo.model.UserLogin" >
     <id column="userId" property="userId" jdbcType="INTEGER" />
    <result column="userName" property="userName" jdbcType="VARCHAR" />
    <result column="password" property="password" jdbcType="VARCHAR" />
    <result column="recentTime" property="recentTime" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
 </resultMap>
 
  <sql id="Base_Column_List" >
 	userId, userName, password, recentTime, remark
  </sql>
   
<select id="queryPasswordInfoByUsername" parameterType="edu.hnu.csee.luo.model.UserLogin" resultType="edu.hnu.csee.luo.model.UserLogin">  
    SELECT * FROM user_login WHERE 1=1 and userName= #{userName} 
</select> 

<update id="updateUserLoginRTByUsername" parameterType="edu.hnu.csee.luo.model.UserLogin" >
  	update user_login set recentTime = #{recentTime,jdbcType=VARCHAR} where userName= #{userName,jdbcType=VARCHAR}
</update> 

<update id="deleteUserLoginById" parameterType="edu.hnu.csee.luo.model.UserLogin" >
  	delete from user_login where userId = #{userId,jdbcType=INTEGER}
</update> 

 <insert id="addUserLoginById" parameterType="edu.hnu.csee.luo.model.UserLogin" >
    insert into user_login
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="userId != null" >
        userId,
      </if>
      <if test="userName != null" >
        userName,
      </if>
      <if test="password != null" >
        password,
      </if>
      <if test="remark != null" >
        remark,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="userId != null" >
        #{userId,jdbcType=INTEGER},
      </if>
      <if test="userName != null" >
        #{userName,jdbcType=VARCHAR},
      </if>
      <if test="password != null" >
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  
  <update id="updateUserPwdInfo" parameterType="edu.hnu.csee.luo.model.UserLogin" >
  	update user_login 
  	<set >
     <if test="password != null" >
        password = #{password,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
    </set>
    where userName = #{userName,jdbcType=VARCHAR}
</update>
</mapper>